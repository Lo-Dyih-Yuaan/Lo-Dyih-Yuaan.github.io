<!DOCTYPE html>
<html>
<head> 
<meta charset="utf-8">
<title>像素板</title>
<script src="PixelCanvas.js"></script>
<script src="data.js"></script>
</head>
<body>
<div id="colors"></div>
<div id="patterns"></div>
<hr/>
<canvas id="canvas">您的浏览器不支持canvas。</canvas>
<button onclick="pixelCanvas.save()">保存</button>
<script>
	let canvas = document.getElementById("canvas");
	pixelCanvas = new PixelCanvas(canvas, anshan2.width, anshan2.height, anshan2.colors, 'Z');
	pixelCanvas.canvas.onclick = function (event) {
		let pixelSize = pixelCanvas.pixelSize;
		let borderSize = pixelCanvas.borderSize;
		let elementSize = pixelSize + borderSize;
		let x = event.pageX - canvas.offsetLeft;
		let y = event.pageY - canvas.offsetTop;
		let j = parseInt(x/elementSize);
		let i = parseInt(y/elementSize);
		if (x%elementSize >= borderSize && y%elementSize >= borderSize)
			pixelCanvas.daub(i, j);
	};
	let colorsButton = document.getElementById("colors");
	colorsButton.style.display='grid';
	colorsButton.style.gridTemplateColumns = 'repeat(8, 1fr)';
	for (let c of "ABCDEFGZ") {
		let button = document.createElement('button');
		button.textContent = (c == 'Z' ? "清除" : c);
		button.style.background = `linear-gradient(to right, ${anshan2.colors[c]}, white, ${anshan2.colors[c]})`;
		button.onclick = function () {
			pixelCanvas.fillColor = c;
		};
		colorsButton.appendChild(button);
	}
	let patternsButton = document.getElementById("patterns");
	patternsButton.style.display='grid';
	patternsButton.style.gridTemplateColumns = 'repeat(9, 1fr)';
	for (let p of [1,2,3,4,5,6,7,8].map(n => [n,anshan2.patterns[n-1]]).concat([["清空","Z"]])) {
		let button = document.createElement('button');
		button.textContent = p[0];
		button.onclick = function() {
			pixelCanvas.paint(p[1]);
		};
		patternsButton.appendChild(button);
	}
</script>
</body>
</html>
